<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8" />
  <title>בחינה</title>
  <link rel="stylesheet" href="script.css">
</head>
<body>
  <div id="intro">
    <h1>הוראות הבחינה</h1>
    <p>היי! הניסוי נועד לבדוק השפעות של דדליין גלוי על ביצועים במשימות. כל הניסוי יערוך 10-15 דקות בערך.
הניסוי כולל שתי בחינות שכוללות 60 תרגילים כל אחת שאמורים להיות ברמה של כיתה ג בחשבון. כל בחינה תיקח 5 דקות בדיוק. אשמח אם תבצעו את שתי הבחינות אחת אחרי השנייה. 
אמורים לפתור אותן באמצעות דף ועיפרון בלבד, ללא מחשבון.
תודה רבה על העזרה!
תמר
</p>
<div class="input-row">
  <label for="nameInput">שם הנבחנ/ת:</label>
  <input type="text" id="nameInput" />
</div><br /><br />
    <button onclick="startTest()">התחל</button>
  </div>

  <div id="test" class="hidden">
    <div class="timer" id="timer"></div>
    <form id="testForm"></form>
    <div class="center">
      <button onclick="submitTest(event)">סיים מבחן</button>
    </div>
  </div>

  <div id="between" class="hidden">
    <h2>המבחן הסתיים</h2>
    <button onclick="startSecondTest()">המשך לבחינה השנייה</button>
  </div>

  <div id="done" class="hidden">
  <h2>תודה רבה!</h2>
  <p>
    הקובץ עם תוצאות המבחן ירד למחשב שלך. <br />
    נא לשלוח אותו לכתובת: 
 <strong>tamarnnn@gmail.com</strong><br />
    ניתן לשלוח אותו במייל תחת הכותרת: "תוצאות מבחן" או פשוט לצרף כקובץ.<br /><br />
    תודה רבה על ההשתתפות!
  </p>
  <button onclick="downloadResults()">הורד קובץ תוצאות</button>
</div>



  <script>
<script>
const questions1 = [
  "12*0", "6+6", "40+30", "10+18", "7*6", "18+14", "10+16", "5*5", "12:4", "8+5",
  "24+16", "4+3", "11*0", "6*7", "6+9", "15+30", "4+2", "3*3", "3+7", "3*11",
  "9+11", "20:5", "14+18", "11+0", "14-12", "3*0", "25+14", "14+3", "2*4", "7+4",
  "30+3", "4*6", "12*1", "21+9", "5+6", "27-25", "40+4", "12+1", "6+3", "4+6",
  "1*4", "9*3", "12+12", "8+3", "12*1", "7+10", "8+4", "7+2", "6*3", "11*2",
  "10*3+2", "2+20:5", "8*2+6", "2*9-4", "16:4+2", "5+12:4", "8*2+4", "5+12:3", "3+9:3", "10+4:2",
  "6*2+2", "10*2-2", "2+18:6", "2+15:5", "3+20:5", "5+24:6", "7*2+6", "4*3+3", "3*3+4", "5*4-2",
  "9*3+3", "2+9:3", "3+10:2", "3*4-2", "6*4-3", "4+24:6", "6*3-2", "3*5+4", "4+12:2", "6+12:6",
  "3*2+4", "3*5-2", "10+12:4", "8*3-4", "4*3+2", "4*3-2", "9*3-6", "4*2+3", "2*9-4", "2*9-3",
  "5+24:6", "3*4+2", "4*5-3", "3*2+1", "3*3+2", "4+20:4", "5+9:3", "3*2+5", "8*2+2", "8*2-3"
];

const questions2 = [
  "0*2", "12:1", "2*0", "40+6", "6+3", "12+7", "3+6", "4*7", "3*7", "3+12",
  "12+3", "2*6", "3*5", "36:6", "16+14", "10*0", "8+4", "0+19", "3*4", "3*4",
  "10+10", "14+3", "6*0", "11+0", "8+5", "5*5", "5+2", "7+6", "3*1", "6+8",
  "2*6", "3*4", "15+12", "8+8", "7*4", "3+6", "2*2", "2+8", "16+9", "4*4",
  "14+2", "3*2", "6+4", "2*3", "3*2", "6*4", "4*5", "9+2", "7*1", "1*3",
  "4+18:6", "6*3+2", "4*5+2", "9*2-3", "9+18:6", "7+12:3", "8*2+5", "6+15:5", "3+10:2", "4*4-6",
  "2*7+1", "3*6-3", "5*3+2", "4*5-3", "6+8:4", "9*2-4", "3*5+1", "5+12:4", "4+20:4", "6+12:4",
  "8*2-4", "4*3+3", "7*2+1", "7+24:6", "5+20:5", "3*3+5", "2*5+3", "7*3-4", "5*4-1", "6*2+3",
  "7+9:3", "4+20:4", "3*4+2", "8+12:4", "6+15:3", "4+6:3", "4+18:6", "7+12:4", "4*3+2", "7+10:5",
  "8*2-6", "8+9:3", "2*7+2", "3*6-4", "3*4+2", "8*2-4", "2*8-6", "8*2-5", "6+12:2", "5+15:5"
];

const correctAnswers = [
  0, 12, 70, 28, 42, 32, 26, 25, 3, 13,
  40, 7, 0, 42, 15, 45, 6, 9, 10, 33,
  20, 4, 32, 11, 2, 0, 39, 17, 8, 11,
  33, 24, 12, 30, 11, 2, 44, 13, 9, 10,
  4, 27, 24, 11, 12, 17, 12, 9, 18, 22,
  32, 6, 22, 14, 6, 8, 20, 9, 6, 12,
  14, 18, 5, 5, 7, 9, 20, 15, 13, 18,
  30, 5, 8, 10, 21, 8, 16, 19, 10, 14,
  10, 13, 16, 20, 14, 10, 21, 11, 14, 15,
  13, 14, 17, 7, 11, 9, 8, 11, 18, 13,

  0, 12, 0, 46, 9, 19, 9, 28, 21, 15,
  15, 12, 15, 6, 30, 0, 12, 19, 12, 12,
  20, 17, 0, 11, 13, 25, 7, 13, 3, 14,
  12, 12, 27, 16, 28, 9, 4, 10, 25, 16,
  16, 6, 10, 6, 6, 24, 20, 11, 7, 3,
  7, 20, 22, 15, 12, 11, 21, 9, 8, 10,
  15, 15, 17, 17, 10, 14, 16, 8, 9, 15,
  12, 15, 15, 11, 9, 14, 13, 17, 19, 15,
  10, 9, 16, 16, 14, 6, 7, 10, 14, 9,
  10, 11, 16, 14, 14, 12, 10, 11, 18, 8
];
</script>


    let results = {
      name: '',
      startTime: '',
      endTime: '',
      tests: []
    };

    let testIndex = 0;
    let startTime, interval, visibleTimer;

    function startTest() {
      const name = document.getElementById('nameInput').value.trim();
      if (!name) return alert("נא למלא שם");
      results.name = name;
      document.getElementById('intro').classList.add('hidden');
      testIndex = Math.random() < 0.5 ? 0 : 1;
      runTest();
    }

    function runTest() {
      const isVisible = (testIndex === 0);
      const questions = testIndex === 0 ? questions1 : questions2;
      const form = document.getElementById('testForm');
      form.innerHTML = '';
      document.getElementById('test').classList.remove('hidden');
      const timerEl = document.getElementById('timer');
      if (!isVisible) timerEl.classList.add('hidden');
      else timerEl.classList.remove('hidden');
      
      questions.forEach((q, i) => {
        form.innerHTML += `
          <div class="question">
            <label>${i + 1}. ${q}<br />
              <textarea name="q${i}"></textarea>
            </label>
          </div>`;
      });

      startTime = Date.now();
      let seconds = 300;
      visibleTimer = isVisible;

      interval = setInterval(() => {
        seconds--;
        if (visibleTimer) timerEl.textContent = `זמן שנותר: ${Math.floor(seconds/60)}:${(seconds%60).toString().padStart(2,'0')}`;
        if (seconds <= 0) {
          clearInterval(interval);
          submitTest();
        }
      }, 1000);
    }

    function submitTest(event) {
      if (event) event.preventDefault();
      clearInterval(interval);
      const formData = new FormData(document.getElementById('testForm'));
      const answers = [];
      const questions = testIndex === 0 ? questions1 : questions2;
      const offset = testIndex === 0 ? 0 : questions1.length;

      for (let i = 0; i < questions.length; i++) {
        const ans = formData.get(`q${i}`)?.trim() || '';
        const correct = parseFloat(correctAnswers[i + offset].toFixed(2));
        const given = parseFloat(ans);
        let status = 'לא הוגש';
        if (ans) {
          status = Math.abs(correct - given) < 0.1 ? 'נכון' : 'שגוי';
        }
        answers.push({ question: questions[i], answer: ans, correct, status });
      }

    const endTime = Date.now();
const durationMs = endTime - startTime;
const durationMin = Math.floor(durationMs / 60000);
const durationSec = Math.floor((durationMs % 60000) / 1000);

results.tests.push({
  type: testIndex === 0 ? 'טיימר גלוי' : 'טיימר נסתר',
  start: new Date(startTime).toISOString(),
  end: new Date(endTime).toISOString(),
  duration: `${durationMin} דקות ו-${durationSec} שניות`,
  answers
});


      document.getElementById('test').classList.add('hidden');
      if (results.tests.length === 1) {
        testIndex = testIndex === 0 ? 1 : 0;
        document.getElementById('between').classList.remove('hidden');
      } else {
        document.getElementById('done').classList.remove('hidden');
      }
    }

    function startSecondTest() {
      document.getElementById('between').classList.add('hidden');
      runTest();
    }

function downloadResults() {
  let text = `תוצאות מבחן\n===============\n`;
  text += `שם הנבחנ/ת: ${results.name}\n`;
  text += `שעת התחלה: ${results.tests[0]?.start}\n`;
  text += `שעת סיום: ${results.tests[1]?.end}\n\n`;

 results.tests.forEach((test, index) => {
  text += `בחינה ${index + 1} (${test.type})\n`;
  text += `------------------------\n`;
  text += `זמן התחלה: ${test.start}\n`;
  text += `זמן סיום: ${test.end}\n`;
  text += `משך זמן: ${test.duration}\n`;
  test.answers.forEach((ans, i) => {
    text += `${i + 1}. ${ans.question} => תשובה: ${ans.answer || '---'}, תקינות: ${ans.status}\n`;
  });
  text += `\n`;
});


 text += `נא לשלוח קובץ זה לכתובת: tamarnnn@gmail.com\n`;

  const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = `תוצאות_${results.name || 'ללא_שם'}.txt`;
  link.click();

  alert("הקובץ ירד למחשב שלך. נא לשלוח אותו לכתובת tamarnnn@gmail.com");
}


  </script>
</body>
</html>
